{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _stateLocal = require(\"state-local\");\n\nvar _config = _interopRequireDefault(require(\"../config\"));\n\nvar _utils = require(\"../utils\");\n\nvar _createState = (0, _stateLocal.create)({\n  config: _config.default,\n  isInitialized: false,\n  configScriptSrc: null,\n  resolve: null,\n  reject: null\n}),\n    _createState2 = (0, _slicedToArray2.default)(_createState, 2),\n    getState = _createState2[0],\n    setState = _createState2[1];\n\nvar MONACO_INIT = 'monaco_init';\n\nfunction config(_ref) {\n  var src = _ref.src,\n      config = (0, _objectWithoutProperties2.default)(_ref, [\"src\"]);\n  setState(function (state) {\n    return {\n      configScriptSrc: src,\n      config: (0, _utils.deepMerge)(state.config, validateConfig(config))\n    };\n  });\n}\n\nfunction init() {\n  var state = getState(function (_ref2) {\n    var isInitialized = _ref2.isInitialized;\n    return {\n      isInitialized: isInitialized\n    };\n  });\n\n  if (!state.isInitialized) {\n    if (window.monaco && window.monaco.editor) {\n      return Promise.resolve(window.monaco);\n    }\n\n    document.addEventListener(MONACO_INIT, handleConfigScriptLoad);\n    (0, _utils.compose)(injectScripts, createMonacoLoaderScript, createConfigScript)();\n    setState({\n      isInitialized: true\n    });\n  }\n\n  return (0, _utils.makeCancelable)(wrapperPromise);\n}\n\nfunction validateConfig(config) {\n  if (config.urls) {\n    informAboutDepreciation();\n    return {\n      paths: {\n        vs: config.urls.monacoBase\n      }\n    };\n  }\n\n  return config;\n}\n\nfunction injectScripts(script) {\n  return document.body.appendChild(script);\n}\n\nfunction createScript(src) {\n  var script = document.createElement('script');\n  return src && (script.src = src), script;\n}\n\nfunction handleConfigScriptLoad() {\n  var state = getState(function (_ref3) {\n    var resolve = _ref3.resolve;\n    return {\n      resolve: resolve\n    };\n  });\n  document.removeEventListener(MONACO_INIT, handleConfigScriptLoad);\n  state.resolve(window.monaco);\n}\n\nfunction createMonacoLoaderScript(configScript) {\n  var state = getState(function (_ref4) {\n    var config = _ref4.config,\n        reject = _ref4.reject;\n    return {\n      config: config,\n      reject: reject\n    };\n  });\n  var loaderScript = createScript(\"\".concat(state.config.paths.vs, \"/loader.js\"));\n\n  loaderScript.onload = function () {\n    return injectScripts(configScript);\n  };\n\n  loaderScript.onerror = state.reject;\n  return loaderScript;\n}\n\nfunction createConfigScript() {\n  var state = getState(function (_ref5) {\n    var configScriptSrc = _ref5.configScriptSrc,\n        config = _ref5.config,\n        reject = _ref5.reject;\n    return {\n      configScriptSrc: configScriptSrc,\n      config: config,\n      reject: reject\n    };\n  });\n  var configScript = createScript();\n\n  if (state.configScriptSrc) {\n    // it will be helpfull in case of CSP, which doesn't allow\n    // inline script execution\n    configScript.src = state.configScriptSrc;\n  } else {\n    configScript.innerHTML = \"\\n      require.config(\".concat(JSON.stringify(state.config), \");\\n      require(['vs/editor/editor.main'], function() {\\n        document.dispatchEvent(new Event('monaco_init'));\\n      });\\n    \");\n  }\n\n  configScript.onerror = state.reject;\n  return configScript;\n}\n\nfunction informAboutDepreciation() {\n  console.warn(\"Deprecation warning!\\n    You are using deprecated way of configuration.\\n\\n    Instead of using\\n      monaco.config({ urls: { monacoBase: '...' } })\\n    use\\n      monaco.config({ paths: { vs: '...' } })\\n\\n    For more please check the link https://github.com/suren-atoyan/monaco-react#config\\n  \");\n}\n\nvar wrapperPromise = new Promise(function (resolve, reject) {\n  return setState({\n    resolve: resolve,\n    reject: reject\n  });\n});\nvar _default = {\n  config: config,\n  init: init\n};\nexports.default = _default;","map":{"version":3,"sources":["/Users/gauravrawal/gaurav/udemy/github/react-snippy/node_modules/@monaco-editor/react/lib/utils/monaco.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_objectWithoutProperties2","_slicedToArray2","_stateLocal","_config","_utils","_createState","create","config","isInitialized","configScriptSrc","resolve","reject","_createState2","getState","setState","MONACO_INIT","_ref","src","state","deepMerge","validateConfig","init","_ref2","window","monaco","editor","Promise","document","addEventListener","handleConfigScriptLoad","compose","injectScripts","createMonacoLoaderScript","createConfigScript","makeCancelable","wrapperPromise","urls","informAboutDepreciation","paths","vs","monacoBase","script","body","appendChild","createScript","createElement","_ref3","removeEventListener","configScript","_ref4","loaderScript","concat","onload","onerror","_ref5","innerHTML","JSON","stringify","console","warn","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _stateLocal = require(\"state-local\");\n\nvar _config = _interopRequireDefault(require(\"../config\"));\n\nvar _utils = require(\"../utils\");\n\nvar _createState = (0, _stateLocal.create)({\n  config: _config.default,\n  isInitialized: false,\n  configScriptSrc: null,\n  resolve: null,\n  reject: null\n}),\n    _createState2 = (0, _slicedToArray2.default)(_createState, 2),\n    getState = _createState2[0],\n    setState = _createState2[1];\n\nvar MONACO_INIT = 'monaco_init';\n\nfunction config(_ref) {\n  var src = _ref.src,\n      config = (0, _objectWithoutProperties2.default)(_ref, [\"src\"]);\n  setState(function (state) {\n    return {\n      configScriptSrc: src,\n      config: (0, _utils.deepMerge)(state.config, validateConfig(config))\n    };\n  });\n}\n\nfunction init() {\n  var state = getState(function (_ref2) {\n    var isInitialized = _ref2.isInitialized;\n    return {\n      isInitialized: isInitialized\n    };\n  });\n\n  if (!state.isInitialized) {\n    if (window.monaco && window.monaco.editor) {\n      return Promise.resolve(window.monaco);\n    }\n\n    document.addEventListener(MONACO_INIT, handleConfigScriptLoad);\n    (0, _utils.compose)(injectScripts, createMonacoLoaderScript, createConfigScript)();\n    setState({\n      isInitialized: true\n    });\n  }\n\n  return (0, _utils.makeCancelable)(wrapperPromise);\n}\n\nfunction validateConfig(config) {\n  if (config.urls) {\n    informAboutDepreciation();\n    return {\n      paths: {\n        vs: config.urls.monacoBase\n      }\n    };\n  }\n\n  return config;\n}\n\nfunction injectScripts(script) {\n  return document.body.appendChild(script);\n}\n\nfunction createScript(src) {\n  var script = document.createElement('script');\n  return src && (script.src = src), script;\n}\n\nfunction handleConfigScriptLoad() {\n  var state = getState(function (_ref3) {\n    var resolve = _ref3.resolve;\n    return {\n      resolve: resolve\n    };\n  });\n  document.removeEventListener(MONACO_INIT, handleConfigScriptLoad);\n  state.resolve(window.monaco);\n}\n\nfunction createMonacoLoaderScript(configScript) {\n  var state = getState(function (_ref4) {\n    var config = _ref4.config,\n        reject = _ref4.reject;\n    return {\n      config: config,\n      reject: reject\n    };\n  });\n  var loaderScript = createScript(\"\".concat(state.config.paths.vs, \"/loader.js\"));\n\n  loaderScript.onload = function () {\n    return injectScripts(configScript);\n  };\n\n  loaderScript.onerror = state.reject;\n  return loaderScript;\n}\n\nfunction createConfigScript() {\n  var state = getState(function (_ref5) {\n    var configScriptSrc = _ref5.configScriptSrc,\n        config = _ref5.config,\n        reject = _ref5.reject;\n    return {\n      configScriptSrc: configScriptSrc,\n      config: config,\n      reject: reject\n    };\n  });\n  var configScript = createScript();\n\n  if (state.configScriptSrc) {\n    // it will be helpfull in case of CSP, which doesn't allow\n    // inline script execution\n    configScript.src = state.configScriptSrc;\n  } else {\n    configScript.innerHTML = \"\\n      require.config(\".concat(JSON.stringify(state.config), \");\\n      require(['vs/editor/editor.main'], function() {\\n        document.dispatchEvent(new Event('monaco_init'));\\n      });\\n    \");\n  }\n\n  configScript.onerror = state.reject;\n  return configScript;\n}\n\nfunction informAboutDepreciation() {\n  console.warn(\"Deprecation warning!\\n    You are using deprecated way of configuration.\\n\\n    Instead of using\\n      monaco.config({ urls: { monacoBase: '...' } })\\n    use\\n      monaco.config({ paths: { vs: '...' } })\\n\\n    For more please check the link https://github.com/suren-atoyan/monaco-react#config\\n  \");\n}\n\nvar wrapperPromise = new Promise(function (resolve, reject) {\n  return setState({\n    resolve: resolve,\n    reject: reject\n  });\n});\nvar _default = {\n  config: config,\n  init: init\n};\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}