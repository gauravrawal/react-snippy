{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _MonacoContainer = _interopRequireDefault(require(\"../MonacoContainer\"));\n\nvar _utils = require(\"../utils\");\n\nvar _hooks = require(\"../hooks\");\n\nvar _themes = _interopRequireDefault(require(\"../config/themes\"));\n\nfunction DiffEditor(_ref) {\n  var original = _ref.original,\n      modified = _ref.modified,\n      language = _ref.language,\n      originalLanguage = _ref.originalLanguage,\n      modifiedLanguage = _ref.modifiedLanguage,\n      editorDidMount = _ref.editorDidMount,\n      theme = _ref.theme,\n      width = _ref.width,\n      height = _ref.height,\n      loading = _ref.loading,\n      options = _ref.options,\n      className = _ref.className,\n      wrapperClassName = _ref.wrapperClassName;\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      isEditorReady = _useState2[0],\n      setIsEditorReady = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(true),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      isMonacoMounting = _useState4[0],\n      setIsMonacoMounting = _useState4[1];\n\n  var editorRef = (0, _react.useRef)(null);\n  var monacoRef = (0, _react.useRef)(null);\n  var containerRef = (0, _react.useRef)(null);\n  var editorDidMountRef = (0, _react.useRef)(editorDidMount);\n  (0, _hooks.useMount)(function () {\n    var cancelable = _utils.monaco.init();\n\n    cancelable.then(function (monaco) {\n      return (monacoRef.current = monaco) && setIsMonacoMounting(false);\n    }).catch(function (error) {\n      return (error === null || error === void 0 ? void 0 : error.type) !== 'cancelation' && console.error('Monaco initialization: error:', error);\n    });\n    return function () {\n      return editorRef.current ? disposeEditor() : cancelable.cancel();\n    };\n  });\n  (0, _hooks.useUpdate)(function () {\n    editorRef.current.getModel().modified.setValue(modified);\n  }, [modified], isEditorReady);\n  (0, _hooks.useUpdate)(function () {\n    editorRef.current.getModel().original.setValue(original);\n  }, [original], isEditorReady);\n  (0, _hooks.useUpdate)(function () {\n    var _editorRef$current$ge = editorRef.current.getModel(),\n        original = _editorRef$current$ge.original,\n        modified = _editorRef$current$ge.modified;\n\n    monacoRef.current.editor.setModelLanguage(original, originalLanguage || language);\n    monacoRef.current.editor.setModelLanguage(modified, modifiedLanguage || language);\n  }, [language, originalLanguage, modifiedLanguage], isEditorReady);\n  (0, _hooks.useUpdate)(function () {\n    monacoRef.current.editor.setTheme(theme);\n  }, [theme], isEditorReady);\n  (0, _hooks.useUpdate)(function () {\n    editorRef.current.updateOptions(options);\n  }, [options], isEditorReady);\n  var setModels = (0, _react.useCallback)(function () {\n    var originalModel = monacoRef.current.editor.createModel(original, originalLanguage || language);\n    var modifiedModel = monacoRef.current.editor.createModel(modified, modifiedLanguage || language);\n    editorRef.current.setModel({\n      original: originalModel,\n      modified: modifiedModel\n    });\n  }, [language, modified, modifiedLanguage, original, originalLanguage]);\n  var createEditor = (0, _react.useCallback)(function () {\n    editorRef.current = monacoRef.current.editor.createDiffEditor(containerRef.current, (0, _objectSpread2.default)({\n      automaticLayout: true\n    }, options));\n    setModels();\n    monacoRef.current.editor.defineTheme('dark', _themes.default['night-dark']);\n    monacoRef.current.editor.setTheme(theme);\n    setIsEditorReady(true);\n  }, [options, theme, setModels]);\n  (0, _react.useEffect)(function () {\n    if (isEditorReady) {\n      var _editorRef$current$ge2 = editorRef.current.getModel(),\n          _original = _editorRef$current$ge2.original,\n          _modified = _editorRef$current$ge2.modified;\n\n      editorDidMountRef.current(_modified.getValue.bind(_modified), _original.getValue.bind(_original), editorRef.current);\n    }\n  }, [isEditorReady]);\n  (0, _react.useEffect)(function () {\n    !isMonacoMounting && !isEditorReady && createEditor();\n  }, [isMonacoMounting, isEditorReady, createEditor]);\n\n  var disposeEditor = function disposeEditor() {\n    return editorRef.current.dispose();\n  };\n\n  return /*#__PURE__*/_react.default.createElement(_MonacoContainer.default, {\n    width: width,\n    height: height,\n    isEditorReady: isEditorReady,\n    loading: loading,\n    _ref: containerRef,\n    className: className,\n    wrapperClassName: wrapperClassName\n  });\n}\n\nDiffEditor.propTypes = {\n  original: _propTypes.default.string,\n  modified: _propTypes.default.string,\n  language: _propTypes.default.string,\n  originalLanguage: _propTypes.default.string,\n  modifiedLanguage: _propTypes.default.string,\n  editorDidMount: _propTypes.default.func,\n  theme: _propTypes.default.string,\n  width: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n  height: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n  loading: _propTypes.default.oneOfType([_propTypes.default.element, _propTypes.default.string]),\n  options: _propTypes.default.object,\n  className: _propTypes.default.string,\n  wrapperClassName: _propTypes.default.string\n};\nDiffEditor.defaultProps = {\n  editorDidMount: _utils.noop,\n  theme: 'light',\n  width: '100%',\n  height: '100%',\n  loading: 'Loading...',\n  options: {}\n};\nvar _default = DiffEditor;\nexports.default = _default;","map":{"version":3,"sources":["/Users/gauravrawal/gaurav/udemy/jbook/node_modules/@monaco-editor/react/lib/DiffEditor/DiffEditor.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","default","_objectSpread2","_slicedToArray2","_react","_propTypes","_MonacoContainer","_utils","_hooks","_themes","DiffEditor","_ref","original","modified","language","originalLanguage","modifiedLanguage","editorDidMount","theme","width","height","loading","options","className","wrapperClassName","_useState","useState","_useState2","isEditorReady","setIsEditorReady","_useState3","_useState4","isMonacoMounting","setIsMonacoMounting","editorRef","useRef","monacoRef","containerRef","editorDidMountRef","useMount","cancelable","monaco","init","then","current","catch","error","type","console","disposeEditor","cancel","useUpdate","getModel","setValue","_editorRef$current$ge","editor","setModelLanguage","setTheme","updateOptions","setModels","useCallback","originalModel","createModel","modifiedModel","setModel","createEditor","createDiffEditor","automaticLayout","defineTheme","useEffect","_editorRef$current$ge2","_original","_modified","getValue","bind","dispose","createElement","propTypes","string","func","oneOfType","number","element","object","defaultProps","noop","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _MonacoContainer = _interopRequireDefault(require(\"../MonacoContainer\"));\n\nvar _utils = require(\"../utils\");\n\nvar _hooks = require(\"../hooks\");\n\nvar _themes = _interopRequireDefault(require(\"../config/themes\"));\n\nfunction DiffEditor(_ref) {\n  var original = _ref.original,\n      modified = _ref.modified,\n      language = _ref.language,\n      originalLanguage = _ref.originalLanguage,\n      modifiedLanguage = _ref.modifiedLanguage,\n      editorDidMount = _ref.editorDidMount,\n      theme = _ref.theme,\n      width = _ref.width,\n      height = _ref.height,\n      loading = _ref.loading,\n      options = _ref.options,\n      className = _ref.className,\n      wrapperClassName = _ref.wrapperClassName;\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      isEditorReady = _useState2[0],\n      setIsEditorReady = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(true),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      isMonacoMounting = _useState4[0],\n      setIsMonacoMounting = _useState4[1];\n\n  var editorRef = (0, _react.useRef)(null);\n  var monacoRef = (0, _react.useRef)(null);\n  var containerRef = (0, _react.useRef)(null);\n  var editorDidMountRef = (0, _react.useRef)(editorDidMount);\n  (0, _hooks.useMount)(function () {\n    var cancelable = _utils.monaco.init();\n\n    cancelable.then(function (monaco) {\n      return (monacoRef.current = monaco) && setIsMonacoMounting(false);\n    }).catch(function (error) {\n      return (error === null || error === void 0 ? void 0 : error.type) !== 'cancelation' && console.error('Monaco initialization: error:', error);\n    });\n    return function () {\n      return editorRef.current ? disposeEditor() : cancelable.cancel();\n    };\n  });\n  (0, _hooks.useUpdate)(function () {\n    editorRef.current.getModel().modified.setValue(modified);\n  }, [modified], isEditorReady);\n  (0, _hooks.useUpdate)(function () {\n    editorRef.current.getModel().original.setValue(original);\n  }, [original], isEditorReady);\n  (0, _hooks.useUpdate)(function () {\n    var _editorRef$current$ge = editorRef.current.getModel(),\n        original = _editorRef$current$ge.original,\n        modified = _editorRef$current$ge.modified;\n\n    monacoRef.current.editor.setModelLanguage(original, originalLanguage || language);\n    monacoRef.current.editor.setModelLanguage(modified, modifiedLanguage || language);\n  }, [language, originalLanguage, modifiedLanguage], isEditorReady);\n  (0, _hooks.useUpdate)(function () {\n    monacoRef.current.editor.setTheme(theme);\n  }, [theme], isEditorReady);\n  (0, _hooks.useUpdate)(function () {\n    editorRef.current.updateOptions(options);\n  }, [options], isEditorReady);\n  var setModels = (0, _react.useCallback)(function () {\n    var originalModel = monacoRef.current.editor.createModel(original, originalLanguage || language);\n    var modifiedModel = monacoRef.current.editor.createModel(modified, modifiedLanguage || language);\n    editorRef.current.setModel({\n      original: originalModel,\n      modified: modifiedModel\n    });\n  }, [language, modified, modifiedLanguage, original, originalLanguage]);\n  var createEditor = (0, _react.useCallback)(function () {\n    editorRef.current = monacoRef.current.editor.createDiffEditor(containerRef.current, (0, _objectSpread2.default)({\n      automaticLayout: true\n    }, options));\n    setModels();\n    monacoRef.current.editor.defineTheme('dark', _themes.default['night-dark']);\n    monacoRef.current.editor.setTheme(theme);\n    setIsEditorReady(true);\n  }, [options, theme, setModels]);\n  (0, _react.useEffect)(function () {\n    if (isEditorReady) {\n      var _editorRef$current$ge2 = editorRef.current.getModel(),\n          _original = _editorRef$current$ge2.original,\n          _modified = _editorRef$current$ge2.modified;\n\n      editorDidMountRef.current(_modified.getValue.bind(_modified), _original.getValue.bind(_original), editorRef.current);\n    }\n  }, [isEditorReady]);\n  (0, _react.useEffect)(function () {\n    !isMonacoMounting && !isEditorReady && createEditor();\n  }, [isMonacoMounting, isEditorReady, createEditor]);\n\n  var disposeEditor = function disposeEditor() {\n    return editorRef.current.dispose();\n  };\n\n  return /*#__PURE__*/_react.default.createElement(_MonacoContainer.default, {\n    width: width,\n    height: height,\n    isEditorReady: isEditorReady,\n    loading: loading,\n    _ref: containerRef,\n    className: className,\n    wrapperClassName: wrapperClassName\n  });\n}\n\nDiffEditor.propTypes = {\n  original: _propTypes.default.string,\n  modified: _propTypes.default.string,\n  language: _propTypes.default.string,\n  originalLanguage: _propTypes.default.string,\n  modifiedLanguage: _propTypes.default.string,\n  editorDidMount: _propTypes.default.func,\n  theme: _propTypes.default.string,\n  width: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n  height: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n  loading: _propTypes.default.oneOfType([_propTypes.default.element, _propTypes.default.string]),\n  options: _propTypes.default.object,\n  className: _propTypes.default.string,\n  wrapperClassName: _propTypes.default.string\n};\nDiffEditor.defaultProps = {\n  editorDidMount: _utils.noop,\n  theme: 'light',\n  width: '100%',\n  height: '100%',\n  loading: 'Loading...',\n  options: {}\n};\nvar _default = DiffEditor;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}