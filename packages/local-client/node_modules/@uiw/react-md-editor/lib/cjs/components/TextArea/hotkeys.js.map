{"version":3,"sources":["../../../../src/components/TextArea/hotkeys.tsx"],"names":["stopPropagation","e","preventDefault","options","target","starVal","value","substr","selectionStart","valArr","split","currentLineStr","length","textArea","TextAreaTextApi","tabSize","keyCode","space","Array","join","val","selectionEnd","_star","substring","_end","modifiedTextLine","forEach","item","idx","push","modifiedText","oldSelectText","newStarNum","setSelectionRange","start","indexOf","end","modifiedTextObj","replaceSelection","test"],"mappings":"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","sourcesContent":["import insertText from '../../utils/InsertTextAtPosition';\nimport { TextAreaTextApi } from '../../commands';\nimport { insertBeforeEachLine } from '../../commands/list';\n\n\nexport interface IHotkeyOptions {\n  tabSize?: number;\n}\n\n/**\n * - `13` - `Enter`\n * - `9` - `Tab`\n */\nfunction stopPropagation(e: React.KeyboardEvent<HTMLTextAreaElement>) {\n  e.stopPropagation();\n  e.preventDefault();\n}\n\nexport default (options: IHotkeyOptions, e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n  const target = e.target as HTMLTextAreaElement;\n  const starVal = target.value.substr(0, target.selectionStart);\n  const valArr = starVal.split('\\n');\n  const currentLineStr = valArr[valArr.length - 1];\n  const textArea = new TextAreaTextApi(target);\n  if (!options.tabSize) {\n    options.tabSize = 2;\n  }\n  /**\n   * `9` - `Tab`\n   */\n  if (e.keyCode === 9) {\n    stopPropagation(e);\n    const space = new Array(options.tabSize + 1).join(' ');\n    let val = space;\n    if (target.selectionStart !== target.selectionEnd) {\n      const _star = target.value.substring(0, target.selectionStart).split('\\n');\n      const _end = target.value.substring(0, target.selectionEnd).split('\\n');\n      const modifiedTextLine: string[] = [];\n      _end.forEach((item, idx) => {\n        if (item !== _star[idx]) {\n          modifiedTextLine.push(item);\n        }\n      });\n      const modifiedText = modifiedTextLine.join('\\n');\n      const oldSelectText = target.value.substring(target.selectionStart, target.selectionEnd);\n      const newStarNum = target.value.substring(0, target.selectionStart).length;\n\n      textArea.setSelectionRange({\n        start: target.value.indexOf(modifiedText),\n        end: target.selectionEnd,\n      });\n\n      const modifiedTextObj = insertBeforeEachLine(modifiedText, space);\n      textArea.replaceSelection(modifiedTextObj.modifiedText);\n      textArea.setSelectionRange({\n        start: newStarNum + options.tabSize,\n        end: newStarNum + oldSelectText.length + (modifiedTextLine.length * options.tabSize),\n      });\n    } else {\n      return insertText(target, val);\n    }\n  } else if (e.keyCode === 13 && /^-\\s/.test(currentLineStr)) {\n    /**\n     * `13` - `Enter`\n     */\n    stopPropagation(e);\n    return insertText(target, `\\n- `);\n  }\n}"]}