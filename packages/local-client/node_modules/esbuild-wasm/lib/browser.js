(exports=>{var ce=Object.defineProperty,xe=e=>ce(e,"__esModule",{value:!0}),Ee=(e,t)=>{xe(e);for(var r in t)ce(e,r,{get:t[r],enumerable:!0})},V=(e,t,r)=>new Promise((o,d)=>{var l=a=>{try{c(r.next(a))}catch(g){d(g)}},i=a=>{try{c(r.throw(a))}catch(g){d(g)}},c=a=>a.done?o(a.value):Promise.resolve(a.value).then(l,i);c((r=r.apply(e,t)).next())});Ee(exports,{build:()=>Ue,buildSync:()=>Ce,serve:()=>Pe,startService:()=>Ne,transform:()=>Le,transformSync:()=>je,version:()=>De});function le(e){let t=o=>{if(o===null)r.write8(0);else if(typeof o=="boolean")r.write8(1),r.write8(+o);else if(typeof o=="number")r.write8(2),r.write32(o|0);else if(typeof o=="string")r.write8(3),r.write(J(o));else if(o instanceof Uint8Array)r.write8(4),r.write(o);else if(o instanceof Array){r.write8(5),r.write32(o.length);for(let d of o)t(d)}else{let d=Object.keys(o);r.write8(6),r.write32(d.length);for(let l of d)r.write(J(l)),t(o[l])}},r=new re;return r.write32(0),r.write32(e.id<<1|+!e.isRequest),t(e.value),ne(r.buf,r.len-4,0),r.buf.subarray(0,r.len)}function fe(e){let t=()=>{switch(r.read8()){case 0:return null;case 1:return!!r.read8();case 2:return r.read32();case 3:return z(r.read());case 4:return r.read();case 5:{let i=r.read32(),c=[];for(let a=0;a<i;a++)c.push(t());return c}case 6:{let i=r.read32(),c={};for(let a=0;a<i;a++)c[z(r.read())]=t();return c}default:throw new Error("Invalid packet")}},r=new re(e),o=r.read32(),d=(o&1)===0;o>>>=1;let l=t();if(r.ptr!==e.length)throw new Error("Invalid packet");return{id:o,isRequest:d,value:l}}var re=class{constructor(t=new Uint8Array(1024)){this.buf=t;this.len=0;this.ptr=0}_write(t){if(this.len+t>this.buf.length){let r=new Uint8Array((this.len+t)*2);r.set(this.buf),this.buf=r}return this.len+=t,this.len-t}write8(t){let r=this._write(1);this.buf[r]=t}write32(t){let r=this._write(4);ne(this.buf,t,r)}write(t){let r=this._write(4+t.length);ne(this.buf,t.length,r),this.buf.set(t,r+4)}_read(t){if(this.ptr+t>this.buf.length)throw new Error("Invalid packet");return this.ptr+=t,this.ptr-t}read8(){return this.buf[this._read(1)]}read32(){return ie(this.buf,this._read(4))}read(){let t=this.read32(),r=new Uint8Array(t),o=this._read(r.length);return r.set(this.buf.subarray(o,o+t)),r}},J,z;if(typeof TextEncoder!="undefined"&&typeof TextDecoder!="undefined"){let e=new TextEncoder,t=new TextDecoder;J=r=>e.encode(r),z=r=>t.decode(r)}else if(typeof Buffer!="undefined")J=e=>Buffer.from(e),z=e=>Buffer.from(e).toString();else throw new Error("No UTF-8 codec found");function ie(e,t){return e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24}function ne(e,t,r){e[r++]=t,e[r++]=t>>8,e[r++]=t>>16,e[r++]=t>>24}function de(e){if(e+="",e.indexOf(",")>=0)throw new Error(`Invalid target: ${e}`);return e}var C=e=>typeof e=="boolean"?null:"a boolean",h=e=>typeof e=="string"?null:"a string",pe=e=>e instanceof RegExp?null:"a RegExp object",H=e=>typeof e=="number"&&e===(e|0)?null:"an integer",me=e=>typeof e=="function"?null:"a function",q=e=>Array.isArray(e)?null:"an array",X=e=>typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"an object",$e=e=>typeof e=="object"&&!Array.isArray(e)?null:"an object or null",oe=e=>typeof e=="string"||typeof e=="boolean"?null:"a string or a boolean",ke=e=>typeof e=="string"||typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"a string or an object",Be=e=>typeof e=="string"||Array.isArray(e)?null:"a string or an array",Ae=e=>typeof e=="string"||e instanceof Uint8Array?null:"a string or a Uint8Array";function n(e,t,r,o){let d=e[r];if(t[r+""]=!0,d===void 0)return;let l=o(d);if(l!==null)throw new Error(`"${r}" must be ${l}`);return d}function N(e,t,r){for(let o in e)if(!(o in t))throw new Error(`Invalid option ${r}: "${o}"`)}function ge(e){let t=Object.create(null),r=n(e,t,"wasmURL",h),o=n(e,t,"worker",C);return N(e,t,"in startService() call"),{wasmURL:r,worker:o}}function Y(e,t,r,o,d){let l=n(t,r,"color",C),i=n(t,r,"logLevel",h),c=n(t,r,"errorLimit",H);l?e.push(`--color=${l}`):o&&e.push("--color=true"),e.push(`--log-level=${i||d}`),e.push(`--error-limit=${c||0}`)}function ye(e,t,r){let o=n(t,r,"target",Be),d=n(t,r,"format",h),l=n(t,r,"globalName",h),i=n(t,r,"minify",C),c=n(t,r,"minifySyntax",C),a=n(t,r,"minifyWhitespace",C),g=n(t,r,"minifyIdentifiers",C),v=n(t,r,"charset",h),$=n(t,r,"treeShaking",oe),S=n(t,r,"jsxFactory",h),k=n(t,r,"jsxFragment",h),D=n(t,r,"define",X),P=n(t,r,"pure",q),K=n(t,r,"avoidTDZ",C),_=n(t,r,"keepNames",C),M=n(t,r,"banner",h),y=n(t,r,"footer",h);if(o&&(Array.isArray(o)?e.push(`--target=${Array.from(o).map(de).join(",")}`):e.push(`--target=${de(o)}`)),d&&e.push(`--format=${d}`),l&&e.push(`--global-name=${l}`),i&&e.push("--minify"),c&&e.push("--minify-syntax"),a&&e.push("--minify-whitespace"),g&&e.push("--minify-identifiers"),v&&e.push(`--charset=${v}`),$!==void 0&&$!==!0&&e.push(`--tree-shaking=${$}`),S&&e.push(`--jsx-factory=${S}`),k&&e.push(`--jsx-fragment=${k}`),D)for(let u in D){if(u.indexOf("=")>=0)throw new Error(`Invalid define: ${u}`);e.push(`--define:${u}=${D[u]}`)}if(P)for(let u of P)e.push(`--pure:${u}`);K&&e.push("--avoid-tdz"),_&&e.push("--keep-names"),M&&e.push(`--banner=${M}`),y&&e.push(`--footer=${y}`)}function Te(e,t,r,o,d){var p;let l=[],i=Object.create(null),c=null,a=null;Y(l,t,i,r,o),ye(l,t,i);let g=n(t,i,"sourcemap",oe),v=n(t,i,"sourcesContent",C),$=n(t,i,"bundle",C),S=n(t,i,"splitting",C),k=n(t,i,"metafile",h),D=n(t,i,"outfile",h),P=n(t,i,"outdir",h),K=n(t,i,"outbase",h),_=n(t,i,"platform",h),M=n(t,i,"tsconfig",h),y=n(t,i,"resolveExtensions",q),u=n(t,i,"mainFields",q),f=n(t,i,"external",q),B=n(t,i,"loader",X),I=n(t,i,"outExtension",X),U=n(t,i,"publicPath",h),T=n(t,i,"inject",q),b=n(t,i,"entryPoints",q),m=n(t,i,"stdin",X),R=(p=n(t,i,"write",C))!=null?p:d,O=n(t,i,"incremental",C)===!0,F=n(t,i,"plugins",q);if(N(t,i,`in ${e}() call`),g&&l.push(`--sourcemap${g===!0?"":`=${g}`}`),v!==void 0&&l.push(`--sources-content=${v}`),$&&l.push("--bundle"),S&&l.push("--splitting"),k&&l.push(`--metafile=${k}`),D&&l.push(`--outfile=${D}`),P&&l.push(`--outdir=${P}`),K&&l.push(`--outbase=${K}`),_&&l.push(`--platform=${_}`),M&&l.push(`--tsconfig=${M}`),y){let s=[];for(let w of y){if(w+="",w.indexOf(",")>=0)throw new Error(`Invalid resolve extension: ${w}`);s.push(w)}l.push(`--resolve-extensions=${s.join(",")}`)}if(U&&l.push(`--public-path=${U}`),u){let s=[];for(let w of u){if(w+="",w.indexOf(",")>=0)throw new Error(`Invalid main field: ${w}`);s.push(w)}l.push(`--main-fields=${s.join(",")}`)}if(f)for(let s of f)l.push(`--external:${s}`);if(T)for(let s of T)l.push(`--inject:${s}`);if(B)for(let s in B){if(s.indexOf("=")>=0)throw new Error(`Invalid loader extension: ${s}`);l.push(`--loader:${s}=${B[s]}`)}if(I)for(let s in I){if(s.indexOf("=")>=0)throw new Error(`Invalid out extension: ${s}`);l.push(`--out-extension:${s}=${I[s]}`)}if(b)for(let s of b){if(s+="",s.startsWith("-"))throw new Error(`Invalid entry point: ${s}`);l.push(s)}if(m){let s=Object.create(null),w=n(m,s,"contents",h),E=n(m,s,"resolveDir",h),A=n(m,s,"sourcefile",h),x=n(m,s,"loader",h);N(m,s,'in "stdin" object'),A&&l.push(`--sourcefile=${A}`),x&&l.push(`--loader=${x}`),E&&(a=E+""),c=w?w+"":""}return{flags:l,write:R,plugins:F,stdinContents:c,stdinResolveDir:a,incremental:O}}function Fe(e,t,r,o){let d=[],l=Object.create(null);Y(d,t,l,r,o),ye(d,t,l);let i=n(t,l,"sourcemap",oe),c=n(t,l,"tsconfigRaw",ke),a=n(t,l,"sourcefile",h),g=n(t,l,"loader",h);return N(t,l,`in ${e}() call`),i&&d.push(`--sourcemap=${i===!0?"external":i}`),c&&d.push(`--tsconfig-raw=${typeof c=="string"?c:JSON.stringify(c)}`),a&&d.push(`--sourcefile=${a}`),g&&d.push(`--loader=${g}`),d}function we(e){let t=new Map,r=new Map,o=new Map,d=0,l=!1,i=0,c=0,a=new Uint8Array(16*1024),g=0,v=y=>{let u=g+y.length;if(u>a.length){let B=new Uint8Array(u*2);B.set(a),a=B}a.set(y,g),g+=y.length;let f=0;for(;f+4<=g;){let B=ie(a,f);if(f+4+B>g)break;f+=4,K(a.slice(f,f+B)),f+=B}f>0&&(a.set(a.slice(f)),g-=f)},$=()=>{l=!0;for(let y of t.values())y("The service was stopped",null);t.clear();for(let y of o.values())y.onWait("The service was stopped");o.clear()},S=(y,u)=>{if(l)return u("The service is no longer running",null);let f=i++;t.set(f,u),e.writeToStdin(le({id:f,isRequest:!0,value:y}))},k=(y,u)=>{if(l)throw new Error("The service is no longer running");e.writeToStdin(le({id:y,isRequest:!1,value:u}))},D=(y,u)=>V(this,null,function*(){try{switch(u.command){case"resolve":{let f=r.get(u.key);k(y,yield f(u));break}case"load":{let f=r.get(u.key);k(y,yield f(u));break}case"serve-request":{let f=o.get(u.serveID);k(y,{}),f&&f.onRequest&&f.onRequest(u.args);break}case"serve-wait":{let f=o.get(u.serveID);k(y,{}),f&&f.onWait(u.error);break}default:throw new Error("Invalid command: "+u.command)}}catch(f){k(y,{errors:[yield G(f,e)]})}}),P=!0,K=y=>{if(P){P=!1;let f=String.fromCharCode(...y);if(f!=="0.8.27")throw new Error(`Cannot start service: Host version "0.8.27" does not match binary version ${JSON.stringify(f)}`);return}let u=fe(y);if(u.isRequest)D(u.id,u.value);else{let f=t.get(u.id);t.delete(u.id),u.value.error?f(u.value.error,{}):f(null,u.value)}},_=(y,u,f)=>{if(e.isSync)throw new Error("Cannot use plugins in synchronous API calls");let B={},I={},U=0,T=0;u.plugins=[];for(let b of y){let m={};if(typeof b!="object")throw new Error(`Plugin at index ${T} must be an object`);let R=n(b,m,"name",h),O=n(b,m,"setup",me);if(typeof R!="string"||R==="")throw new Error(`Plugin at index ${T} is missing a name`);if(typeof O!="function")throw new Error(`[${R}] Plugin is missing a setup function`);N(b,m,`on plugin ${JSON.stringify(R)}`);let F={name:R,onResolve:[],onLoad:[]};T++,O({onResolve(p,s){let w={},E=n(p,w,"filter",pe),A=n(p,w,"namespace",h);if(N(p,w,`in onResolve() call for plugin ${JSON.stringify(R)}`),E==null)throw new Error(`[${F.name}] onResolve() call is missing a filter`);let x=U++;B[x]={name:R,callback:s},F.onResolve.push({id:x,filter:E.source,namespace:A||""})},onLoad(p,s){let w={},E=n(p,w,"filter",pe),A=n(p,w,"namespace",h);if(N(p,w,`in onLoad() call for plugin ${JSON.stringify(R)}`),E==null)throw new Error(`[${F.name}] onLoad() call is missing a filter`);let x=U++;I[x]={name:R,callback:s},F.onLoad.push({id:x,filter:E.source,namespace:A||""})}}),u.plugins.push(F)}return r.set(f,b=>V(this,null,function*(){switch(b.command){case"resolve":{let m={};for(let R of b.ids)try{let{name:O,callback:F}=B[R],p=yield F({path:b.path,importer:b.importer,namespace:b.namespace,resolveDir:b.resolveDir});if(p!=null){if(typeof p!="object")throw new Error(`Expected onResolve() callback in plugin ${JSON.stringify(O)} to return an object`);let s={},w=n(p,s,"pluginName",h),E=n(p,s,"path",h),A=n(p,s,"namespace",h),x=n(p,s,"external",C),j=n(p,s,"errors",q),L=n(p,s,"warnings",q);N(p,s,`from onResolve() callback in plugin ${JSON.stringify(O)}`),m.id=R,w!=null&&(m.pluginName=w),E!=null&&(m.path=E),A!=null&&(m.namespace=A),x!=null&&(m.external=x),j!=null&&(m.errors=ee(j,"errors")),L!=null&&(m.warnings=ee(L,"warnings"));break}}catch(O){return{id:R,errors:[yield G(O,e)]}}return m}case"load":{let m={};for(let R of b.ids)try{let{name:O,callback:F}=I[R],p=yield F({path:b.path,namespace:b.namespace});if(p!=null){if(typeof p!="object")throw new Error(`Expected onLoad() callback in plugin ${JSON.stringify(O)} to return an object`);let s={},w=n(p,s,"pluginName",h),E=n(p,s,"contents",Ae),A=n(p,s,"resolveDir",h),x=n(p,s,"loader",h),j=n(p,s,"errors",q),L=n(p,s,"warnings",q);N(p,s,`from onLoad() callback in plugin ${JSON.stringify(O)}`),m.id=R,w!=null&&(m.pluginName=w),E instanceof Uint8Array?m.contents=E:E!=null&&(m.contents=J(E)),A!=null&&(m.resolveDir=A),x!=null&&(m.loader=x),j!=null&&(m.errors=ee(j,"errors")),L!=null&&(m.warnings=ee(L,"warnings"));break}}catch(O){return{id:R,errors:[yield G(O,e)]}}return m}default:throw new Error("Invalid command: "+b.command)}})),()=>r.delete(f)},M=(y,u)=>{let f={},B=n(y,f,"port",H),I=n(y,f,"host",h),U=n(y,f,"onRequest",me),T=d++,b,m=new Promise((R,O)=>{b=F=>{o.delete(T),F!==null?O(new Error(F)):R()}});return u.serve={serveID:T},N(y,f,"in serve() call"),B!==void 0&&(u.serve.port=B),I!==void 0&&(u.serve.host=I),o.set(T,{onRequest:U,onWait:b}),{wait:m,stop(){S({command:"serve-stop",serveID:T},()=>{})}}};return{readFromStdout:v,afterClose:$,service:{buildOrServe(y,u,f,B,I){let U="info";try{let T=c++,b=!e.isBrowser,{flags:m,write:R,plugins:O,stdinContents:F,stdinResolveDir:p,incremental:s}=Te(y,f,B,U,b),w={command:"build",key:T,flags:m,write:R,stdinContents:F,stdinResolveDir:p,incremental:s},E=u&&M(u,w),A=O&&O.length>0&&_(O,w,T),x,j=(L,W)=>{let Z=L.errors,Q=L.warnings;if(Z.length>0)return W(he("Build failed",Z,Q),null);let te={warnings:Q};if(L.outputFiles&&(te.outputFiles=L.outputFiles.map(Ie)),L.rebuildID!==void 0){if(!x){let se=!1;x=()=>new Promise((ve,Re)=>{if(se||l)throw new Error("Cannot rebuild");S({command:"rebuild",rebuildID:L.rebuildID},(ae,Se)=>{if(ae)return W(new Error(ae),null);j(Se,(ue,Oe)=>{ue?Re(ue):ve(Oe)})})}),x.dispose=()=>{se=!0,A&&A(),S({command:"rebuild-dispose",rebuildID:L.rebuildID},()=>{})}}te.rebuild=x}return W(null,te)};if(R&&e.isBrowser)throw new Error('Cannot enable "write" in the browser');if(s&&e.isSync)throw new Error('Cannot use "incremental" with a synchronous build');S(w,(L,W)=>{if(L)return I(new Error(L),null);if(E){let Z=W,Q={port:Z.port,host:Z.host,wait:E.wait,stop:E.stop};return I(null,Q)}return A&&!s&&A(),j(W,I)})}catch(T){let b=[];try{Y(b,f,{},B,U)}catch(m){}S({command:"error",flags:b,error:G(T,e)},()=>{I(T,null)})}},transform(y,u,f,B,I,U){let T="silent",b=m=>{try{let R=Fe(y,f,B,T),O={command:"transform",flags:R,inputFS:m!==null,input:m!==null?m:u};S(O,(F,p)=>{if(F)return U(new Error(F),null);let s=p.errors,w=p.warnings,E=1,A=()=>--E===0&&U(null,{warnings:w,code:p.code,map:p.map});if(s.length>0)return U(he("Transform failed",s,w),null);p.codeFS&&(E++,I.readFile(p.code,(x,j)=>{x!==null?U(x,null):(p.code=j,A())})),p.mapFS&&(E++,I.readFile(p.map,(x,j)=>{x!==null?U(x,null):(p.map=j,A())})),A()})}catch(R){let O=[];try{Y(O,f,{},B,T)}catch(F){}S({command:"error",flags:O,error:G(R,e)},()=>{U(R,null)})}};if(u.length>1024*1024){let m=b;b=()=>I.writeFile(u,m)}b(null)}}}}function G(e,t){let r="Internal error",o=null;try{r=(e&&e.message||e)+""}catch(d){}try{let d=e.stack+"",l=d.split(`
`,3),i="    at ";if(t.readFileSync&&!l[0].startsWith(i)&&l[1].startsWith(i)){let c=l[1].slice(i.length);for(;;){let a=/^\S+ \((.*)\)$/.exec(c);if(a){c=a[1];continue}if(a=/^eval at \S+ \((.*)\)(?:, \S+:\d+:\d+)?$/.exec(c),a){c=a[1];continue}if(a=/^(\S+):(\d+):(\d+)$/.exec(c),a){let g=t.readFileSync(a[1],"utf8"),v=g.split(/\r\n|\r|\n|\u2028|\u2029/)[+a[2]-1]||"";o={file:a[1],namespace:"file",line:+a[2],column:+a[3]-1,length:0,lineText:v+`
`+l.slice(1).join(`
`)}}break}}}catch(d){}return{text:r,location:o}}function he(e,t,r){let o=5,d=t.length<1?"":` with ${t.length} error${t.length<2?"":"s"}:`+t.slice(0,o+1).map((i,c)=>{if(c===o)return`
...`;if(!i.location)return`
error: ${i.text}`;let{file:a,line:g,column:v}=i.location;return`
${a}:${g}:${v}: error: ${i.text}`}).join(""),l=new Error(`${e}${d}`);return l.errors=t,l.warnings=r,l}function ee(e,t){let r=[],o=0;for(let d of e){let l={},i=n(d,l,"text",h),c=n(d,l,"location",$e);N(d,l,`in element ${o} of "${t}"`);let a=null;if(c!=null){let g={},v=n(c,g,"file",h),$=n(c,g,"namespace",h),S=n(c,g,"line",H),k=n(c,g,"column",H),D=n(c,g,"length",H),P=n(c,g,"lineText",h);N(c,g,`in element ${o} of "${t}"`),a={file:v||"",namespace:$||"",line:S||0,column:k||0,length:D||0,lineText:P||""}}r.push({text:i||"",location:a}),o++}return r}function Ie({path:e,contents:t}){let r=null;return{path:e,contents:t,get text(){return r===null&&(r=z(t)),r}}}function be(e,t){let r=new Map;return o=>V(this,null,function*(){let d=e(),l=JSON.stringify(o||{}),i=`${l} ${d}`,c=r.get(i),a=!1,g=()=>{if(a)throw new Error("The service was stopped")},v=()=>!a&&(a=!0,--c.refCount===0)?(r.delete(i),!0):!1;c===void 0&&(c={promise:t(JSON.parse(l)),refCount:0},r.set(i,c)),++c.refCount;try{let $=yield c.promise;return{build:S=>(g(),$.build(S)),serve(S,k){return g(),$.serve(S,k)},transform(S,k){return g(),$.transform(S,k)},stop(){v()&&$.stop()}}}catch($){throw v(),$}})}var De="0.8.27",Ue=()=>{throw new Error('The "build" API only works in node')},Pe=()=>{throw new Error('The "serve" API only works in node')},Le=()=>{throw new Error('The "transform" API only works in node')},Ce=()=>{throw new Error('The "buildSync" API only works in node')},je=()=>{throw new Error('The "transformSync" API only works in node')},Ne=be(()=>"",e=>V(void 0,null,function*(){if(!e)throw new Error('Must provide an options object to "startService"');e=ge(e);let t=e.wasmURL,r=e.worker!==!1;if(!t)throw new Error('Must provide the "wasmURL" option');t+="";let o=yield fetch(t);if(!o.ok)throw new Error(`Failed to download ${JSON.stringify(t)}`);let d=yield o.arrayBuffer(),l='{let global={};for(let o=self;o;o=Object.getPrototypeOf(o))for(let k of Object.getOwnPropertyNames(o))global[k]=self[k];\n// Copyright 2018 The Go Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style\n// license that can be found in the LICENSE file.\n(()=>{if(!(typeof global!="undefined"))if(typeof window!="undefined")window.global=window;else if(typeof self!="undefined")self.global=self;else throw new Error("cannot export Go (neither global, window nor self is defined)");if(!global.require&&typeof require!="undefined"&&(global.require=require),!global.fs&&global.require){const r=require("fs");Object.keys(r)!==0&&(global.fs=r)}const l=()=>{const r=new Error("not implemented");return r.code="ENOSYS",r};if(!global.fs){let r="";global.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(n,s){r+=g.decode(s);const i=r.lastIndexOf(`\n`);return i!=-1&&(console.log(r.substr(0,i)),r=r.substr(i+1)),s.length},write(n,s,i,c,f,u){if(i!==0||c!==s.length||f!==null){u(l());return}const h=this.writeSync(n,s);u(null,h)},chmod(n,s,i){i(l())},chown(n,s,i,c){c(l())},close(n,s){s(l())},fchmod(n,s,i){i(l())},fchown(n,s,i,c){c(l())},fstat(n,s){s(l())},fsync(n,s){s(null)},ftruncate(n,s,i){i(l())},lchown(n,s,i,c){c(l())},link(n,s,i){i(l())},lstat(n,s){s(l())},mkdir(n,s,i){i(l())},open(n,s,i,c){c(l())},read(n,s,i,c,f,u){u(l())},readdir(n,s){s(l())},readlink(n,s){s(l())},rename(n,s,i){i(l())},rmdir(n,s){s(l())},stat(n,s){s(l())},symlink(n,s,i){i(l())},truncate(n,s,i){i(l())},unlink(n,s){s(l())},utimes(n,s,i,c){c(l())}}}if(global.process||(global.process={getuid(){return-1},getgid(){return-1},geteuid(){return-1},getegid(){return-1},getgroups(){throw l()},pid:-1,ppid:-1,umask(){throw l()},cwd(){throw l()},chdir(){throw l()}}),!global.crypto){const r=require("crypto");global.crypto={getRandomValues(n){r.randomFillSync(n)}}}global.performance||(global.performance={now(){const[r,n]=process.hrtime();return r*1e3+n/1e6}}),global.TextEncoder||(global.TextEncoder=require("util").TextEncoder),global.TextDecoder||(global.TextDecoder=require("util").TextDecoder);const d=new TextEncoder("utf-8"),g=new TextDecoder("utf-8");if(global.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=e=>{e!==0&&console.warn("exit code:",e)},this._exitPromise=new Promise(e=>{this._resolveExitPromise=e}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const r=(e,t)=>{this.mem.setUint32(e+0,t,!0),this.mem.setUint32(e+4,Math.floor(t/4294967296),!0)},n=e=>{const t=this.mem.getUint32(e+0,!0),o=this.mem.getInt32(e+4,!0);return t+o*4294967296},s=e=>{const t=this.mem.getFloat64(e,!0);if(t===0)return;if(!isNaN(t))return t;const o=this.mem.getUint32(e,!0);return this._values[o]},i=(e,t)=>{const o=2146959360;if(typeof t=="number"&&t!==0){if(isNaN(t)){this.mem.setUint32(e+4,o,!0),this.mem.setUint32(e,0,!0);return}this.mem.setFloat64(e,t,!0);return}if(t===void 0){this.mem.setFloat64(e,0,!0);return}let a=this._ids.get(t);a===void 0&&(a=this._idPool.pop(),a===void 0&&(a=this._values.length),this._values[a]=t,this._goRefCounts[a]=0,this._ids.set(t,a)),this._goRefCounts[a]++;let m=0;switch(typeof t){case"object":t!==null&&(m=1);break;case"string":m=2;break;case"symbol":m=3;break;case"function":m=4;break}this.mem.setUint32(e+4,o|m,!0),this.mem.setUint32(e,a,!0)},c=e=>{const t=n(e+0),o=n(e+8);return new Uint8Array(this._inst.exports.mem.buffer,t,o)},f=e=>{const t=n(e+0),o=n(e+8),a=new Array(o);for(let m=0;m<o;m++)a[m]=s(t+m*8);return a},u=e=>{const t=n(e+0),o=n(e+8);return g.decode(new DataView(this._inst.exports.mem.buffer,t,o))},h=Date.now()-performance.now();this.importObject={go:{"runtime.wasmExit":e=>{const t=this.mem.getInt32(e+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(t)},"runtime.wasmWrite":e=>{const t=n(e+8),o=n(e+16),a=this.mem.getInt32(e+24,!0);fs.writeSync(t,new Uint8Array(this._inst.exports.mem.buffer,o,a))},"runtime.resetMemoryDataView":e=>{this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":e=>{r(e+8,(h+performance.now())*1e6)},"runtime.walltime1":e=>{const t=new Date().getTime();r(e+8,t/1e3),this.mem.setInt32(e+16,t%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":e=>{const t=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(t,setTimeout(()=>{for(this._resume();this._scheduledTimeouts.has(t);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()},n(e+8)+1)),this.mem.setInt32(e+16,t,!0)},"runtime.clearTimeoutEvent":e=>{const t=this.mem.getInt32(e+8,!0);clearTimeout(this._scheduledTimeouts.get(t)),this._scheduledTimeouts.delete(t)},"runtime.getRandomData":e=>{crypto.getRandomValues(c(e+8))},"syscall/js.finalizeRef":e=>{const t=this.mem.getUint32(e+8,!0);if(this._goRefCounts[t]--,this._goRefCounts[t]===0){const o=this._values[t];this._values[t]=null,this._ids.delete(o),this._idPool.push(t)}},"syscall/js.stringVal":e=>{i(e+24,u(e+8))},"syscall/js.valueGet":e=>{const t=Reflect.get(s(e+8),u(e+16));e=this._inst.exports.getsp(),i(e+32,t)},"syscall/js.valueSet":e=>{Reflect.set(s(e+8),u(e+16),s(e+32))},"syscall/js.valueDelete":e=>{Reflect.deleteProperty(s(e+8),u(e+16))},"syscall/js.valueIndex":e=>{i(e+24,Reflect.get(s(e+8),n(e+16)))},"syscall/js.valueSetIndex":e=>{Reflect.set(s(e+8),n(e+16),s(e+24))},"syscall/js.valueCall":e=>{try{const t=s(e+8),o=Reflect.get(t,u(e+16)),a=f(e+32),m=Reflect.apply(o,t,a);e=this._inst.exports.getsp(),i(e+56,m),this.mem.setUint8(e+64,1)}catch(t){i(e+56,t),this.mem.setUint8(e+64,0)}},"syscall/js.valueInvoke":e=>{try{const t=s(e+8),o=f(e+16),a=Reflect.apply(t,void 0,o);e=this._inst.exports.getsp(),i(e+40,a),this.mem.setUint8(e+48,1)}catch(t){i(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueNew":e=>{try{const t=s(e+8),o=f(e+16),a=Reflect.construct(t,o);e=this._inst.exports.getsp(),i(e+40,a),this.mem.setUint8(e+48,1)}catch(t){i(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueLength":e=>{r(e+16,parseInt(s(e+8).length))},"syscall/js.valuePrepareString":e=>{const t=d.encode(String(s(e+8)));i(e+16,t),r(e+24,t.length)},"syscall/js.valueLoadString":e=>{const t=s(e+8);c(e+16).set(t)},"syscall/js.valueInstanceOf":e=>{this.mem.setUint8(e+24,s(e+8)instanceof s(e+16)?1:0)},"syscall/js.copyBytesToGo":e=>{const t=c(e+8),o=s(e+32);if(!(o instanceof Uint8Array||o instanceof Uint8ClampedArray)){this.mem.setUint8(e+48,0);return}const a=o.subarray(0,t.length);t.set(a),r(e+40,a.length),this.mem.setUint8(e+48,1)},"syscall/js.copyBytesToJS":e=>{const t=s(e+8),o=c(e+16);if(!(t instanceof Uint8Array||t instanceof Uint8ClampedArray)){this.mem.setUint8(e+48,0);return}const a=o.subarray(0,t.length);t.set(a),r(e+40,a.length),this.mem.setUint8(e+48,1)},debug:e=>{console.log(e)}}}}async run(r){this._inst=r,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,global,this],this._goRefCounts=new Array(this._values.length).fill(Infinity),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[global,5],[this,6]]),this._idPool=[],this.exited=!1;let n=4096;const s=h=>{const e=n,t=d.encode(h+"\\0");return new Uint8Array(this.mem.buffer,n,t.length).set(t),n+=t.length,n%8!==0&&(n+=8-n%8),e},i=this.argv.length,c=[];this.argv.forEach(h=>{c.push(s(h))}),c.push(0);const f=Object.keys(this.env).sort();f.forEach(h=>{c.push(s(`${h}=${this.env[h]}`))}),c.push(0);const u=n;c.forEach(h=>{this.mem.setUint32(n,h,!0),this.mem.setUint32(n+4,0,!0),n+=8}),this._inst.exports.run(i,u),this.exited&&this._resolveExitPromise(),await this._exitPromise}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(r){const n=this;return function(){const s={id:r,this:this,args:arguments};return n._pendingEvent=s,n._resume(),s.result}}},global.require&&global.require.main===module&&global.process&&global.process.versions&&!global.process.versions.electron){process.argv.length<3&&(console.error("usage: go_js_wasm_exec [wasm binary] [arguments]"),process.exit(1));const r=new Go;r.argv=process.argv.slice(2),r.env=Object.assign({TMPDIR:require("os").tmpdir()},process.env),r.exit=process.exit,WebAssembly.instantiate(fs.readFileSync(process.argv[2]),r.importObject).then(n=>(process.on("exit",s=>{s===0&&!r.exited&&(r._pendingEvent={id:0},r._resume())}),r.run(n.instance))).catch(n=>{console.error(n),process.exit(1)})}})();\nonmessage=({data:c})=>{let y=new TextDecoder,s=global.fs,a="";s.writeSync=(e,t)=>{if(e===1)self.postMessage(t);else if(e===2){a+=y.decode(t);let n=a.split(`\n`);n.length>1&&console.log(n.slice(0,-1).join(`\n`)),a=n[n.length-1]}else throw new Error("Bad write");return t.length};let l=[],i,r=0;onmessage=({data:e})=>{e.length>0&&(l.push(e),i&&i())},s.read=(e,t,n,d,u,m)=>{if(e!==0||n!==0||d!==t.length||u!==null)throw new Error("Bad read");if(l.length===0){i=()=>s.read(e,t,n,d,u,m);return}let g=l[0],h=Math.max(0,Math.min(d,g.length-r));t.set(g.subarray(r,r+h),n),r+=h,r===g.length&&(l.shift(),r=0),m(null,h)};let o=new global.Go;o.argv=["","--service=0.8.27"],WebAssembly.instantiate(c,o.importObject).then(({instance:e})=>o.run(e))};}',i;if(r){let v=new Blob([l],{type:"application/javascript"});i=new Worker(URL.createObjectURL(v))}else{let v=new Function("postMessage",l+"var onmessage; return m => onmessage(m)"),$=v(S=>i.onmessage({data:S}));i={onmessage:null,postMessage:S=>$({data:S}),terminate(){}}}i.postMessage(d),i.onmessage=({data:v})=>c(v);let{readFromStdout:c,afterClose:a,service:g}=we({writeToStdin(v){i.postMessage(v)},isSync:!1,isBrowser:!0});return{build:v=>new Promise(($,S)=>g.buildOrServe("build",null,v,!1,(k,D)=>k?S(k):$(D))),transform:(v,$)=>(v+="",new Promise((S,k)=>g.transform("transform",v,$||{},!1,{readFile(D,P){P(new Error("Internal error"),null)},writeFile(D,P){P(null)}},(D,P)=>D?k(D):S(P)))),serve(){throw new Error('The "serve" API only works in node')},buildSync(){throw new Error('The "buildSync" API only works in node')},transformSync(){throw new Error('The "transformSync" API only works in node')},stop(){i.terminate(),a()}}}));})(typeof exports==="object"?exports:(typeof self!=="undefined"?self:this).esbuild={});
